<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REGISTRO DE SUCURSALES</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
     body {
    background-image: linear-gradient(to right, #ffecd2 0%, #fcb69f 100%);
min-height: 80vh;
display: ruby-text-container;
justify-content: center;
align-items: center;
font-style:oblique;
text-align: center;
margin-top: auto;
}

.buttons {
min-width:600px;
display: flex;
position:relative;
justify-content: space-between;
float: left;
}

.editar {
    min-width:600px;
display:inline;
position:relative;
justify-content: right;

}
.editar a {
text-decoration: none;
font-size: 20px;
width: 60px;
height: 60px;
line-height: 60px;
text-align: center;
float:right;
background:#536cd8;
color: #f1f1f1;
border-radius: 50%;
box-shadow: 2px 2px 5px rgba(0,0,0, .5);
transition: all .4s ease-in-out;
}

.borrar {
min-width:600px;
padding: 10px;
margin-left: -45px;
margin-right: -150px;
display:inline;

}
.borrar a {
text-decoration: none;
font-size: 20px;
width: 60px;
height: 60px;
line-height: 60px;
text-align: center;
background:rgb(168, 75, 75);
color: #f1f1f1;
border-radius: 50%;
box-shadow: 2px 2px 5px rgba(0,0,0, .5);
transition: all .4s ease-in-out;
}

.buttons a {
text-decoration: none;
font-size: 20px;
width: 60px;
height: 60px;
line-height: 60px;
text-align: center;
background: #254556;
color: #f1f1f1;
border-radius: 50%;
box-shadow: 2px 2px 5px rgba(0,0,0, .5);
transition: all .4s ease-in-out;
}

.buttons a:hover {
transform: scale(1.2);
} 
    </style>
      
</head>
<body>

    <nav class="navbar navbar-expand-lg table-dark">
        <a href="/" class="navbar-brand">LISTADO DE AEROPUERTOS</a>
    </nav>

    <div class="mb-3">
        <br><br>
        <input type="text" id="autocompleta_busqueda" class="form-control form-control-lg"
       placeholder="Introduzca el nombre del aeropuerto" />
        <span id="buscar_resultado"></span>
        </div> 

    <div class="container">
        <div class="row mt-5">
            <div class="col-md-10">
                <section class="buttons">
                    <a href="/crearaeropuerto" class="fa fa-address-card" aria-hidden="true"></a>
                    </section>
                <table class="table table-background-image: linear-gradient(to right, #ffecd2 0%, #fcb69f 100%);">
                    <thead class="thead-dark">
                        <tr class="table-dark">
                           
                            <th scope="col">ID</th> 
                            <th scope="col">NOMBRE</th>
                            <th scope="col">ID PAIS</th> 
                            <th>.</th>
                           
                                    
                        </tr>
                    </thead>
                    <tbody>
                        
                     <% results.forEach((AEROPUERTO)=> { %>                                     
                         <tr>
                            <td class="table-light"><%= AEROPUERTO.idaeropuerto%></td>
                            <td class="table-light"><%= AEROPUERTO.nombre%></td>
                            <td class="table-light"><%= AEROPUERTO.idpais%></td>
                            <td>
                             
                                <section class="editar">
                                    <a href="/editaraeropuerto/<%= AEROPUERTO.idaeropuerto%>" class="fa fa-pencil-square-o"></a>
                                </section>
                                   
                                   

                               <section class="borrar">
                                <a href="/deleteaeropuerto/<%= AEROPUERTO.idaeropuerto%>" class="fa fa-trash-o"></a>
                               </section>
                                  
                             
                                

                                
                     
                            </td>                          

                        </tr>
                    <% }) %>
                    </tbody>
                   


                    
                 </table>

            </div>
            
        </div>
    </div>
    
   
</body>
</html>


<script>

    function cargar_aeropuerto(query = '')
    {
    fetch('/get_aeropuerto?buscar_query='+query+'').then(function(response){ return response.json();
    }).then(function(responseData){
    var html = '<ul class="list-group">'; if(responseData.length > 0)
    {
    for(var count = 0; count < responseData.length; count++)
    {
    var regular_expression = new RegExp('('+query+')', 'gi');
    
    html += '<a href="#" class="list-group-item list-group-item-action" onclick="get_text(this)">'+responseData[count].categorias.replace(regular_expression, '<span class="text-primary fw-bold">$1</span>')+'</a>';
    }
    }
    else
     
    {
    html += '<a href="#" class="list-group-item list-group-item-action disabled">Registro No Encontrado</a>';
    }
    
    html += '</ul>';
    
    document.getElementById('buscar_resultado').innerHTML = html;
    
    });
    }
    
    var buscar_elemento = document.getElementById("autocompleta_busqueda"); buscar_elemento.onkeyup = function(){
    var query = buscar_elemento.value;
    
    cargar_aeropuerto(query);
    
    };
    
    buscar_elemento.onfocus = function(){ var query = buscar_elemento.value;
    cargar_aeropuerto(query);
    
    };
    
    function cargar_texto(event)
    {
    var aeropuerto = event.textContent;
    
    console.log(aeropuerto);
    
    document.getElementById('autocompleta_busqueda').value = aeropuerto;
    
    document.getElementById('buscar_resultado').innerHTML = '';
    }
    
    </script>